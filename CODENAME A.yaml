mode: rule
allow-lan: true
unified-delay: true
bind-address: '*'
log-level: silent
ipv6: true
geodata-mode: true
external-controller: 0.0.0.0:9090
external-ui: dashboard/dist
tcp-concurrent: false
interface-name: ""
enable-process: false
geodata-loader: memconservative
secret: ""
profile:
  store-selected: true
  store-fake-ip: false
geox-url: {mmdb: "https://cdn.jsdelivr.net/gh/Dreamacro/maxmind-geoip@release/Country.mmdb", geoip: "https://github.com/v2fly/geoip/raw/release/geoip-only-cn-private.dat", geosite: "https://github.com/taamarin/GeoSite.dat/raw/release/dlc.dat"}
dns:
  enable: true
  device: Meta
  ipv6: false
  default-nameserver:
    - 1.1.1.1
    - 9.9.9.9
  listen: 0.0.0.0:1053
  use-hosts: true
  enhanced-mode: fake-ip
  fake-ip-filter: ['networktest.twilio.com', '+.twilio.com']
  nameserver:
    - https://149.112.112.112/dns-query
    - quic://dns.adguard.com
    - tls://dns.adguard.com
  proxy-server-nameserver:
    - 104.18.38.174
  fallback:
    - 1.1.1.1
    - 8.8.8.8
  fallback-filter:
    geoip: false
    geoip-code: ID
    geosite: []
    domain:
      - '+.google.com'
    ipcidr: []
auto-redir:
  enable: false
  auto-route: false
tun:
  enable: false
  stack: system
  dns-hijack:
    - any:53
  auto-route: true
  auto-detect-interface: true
sniffer:
  enable: false
  sniffing:
    - tls
    - http
  force-domain:
    - '+'
  skip-domain:
    - '+.google.com'
  port-whitelist:
    - 443
    - 80
iptables: {enable: false, inbound-interface: "", bypass: []}
hosts:
  '+.clash.meta': 127.0.0.1
  'cacerts.digicert.com': 141.193.213.20
tproxy-port: 9898
proxy-groups:
- name: CLASH
  type: select
  proxies:
  - ID
  - SG
  - BEST-PING 
  - LOAD-BALANCE
  - ADS
  
- name: ID
  type: url-test
  url: http://hi.bonds.id/ping
  interval: 300
  tolerance: 100
  use:
  - AKUNID

- name: SG
  type: url-test
  url: http://hi.bonds.id/ping
  interval: 300
  tolerance: 100
  use:
  - AKUNSG
  
- name: BEST-PING 
  type: url-test
  url: http://hi.bonds.id/ping
  interval: 300
  tolerance: 80
  proxies:
  - ID
  - SG
  
- name: LOAD-BALANCE 
  type: load-balance
  url: http://hi.bonds.id/ping
  interval: 300
  strategy: consistent-hashing
  disable-udp: false
  proxies:
  - ID
  - SG

- name: ADS
  type: select
  proxies:
  - REJECT
  - DIRECT
      
proxy-providers:
  AKUNID:
    type: http
    behavior: classical
    path: ./AKUNID.yaml
    url: https://raw.githubusercontent.com/NICE28004/akun_clash04/main/AKUNID.yaml
    interval: 3500
    health-check:
      enable: true
      interval: 300
      lazy: true
      url: 'http://www.gstatic.com/generate_204'
      
  AKUNSG:
    type: http
    behavior: classical
    path: ./AKUNSG.yaml
    url: https://raw.githubusercontent.com/NICE28004/akun_clash04/main/AKUNSG.yaml
    interval: 3600
    health-check:
      enable: true
      interval: 300
      lazy: true
      url: 'http://www.gstatic.com/generate_204'
      
rule-providers: 
  rule_portgames:
    type: http
    behavior: classical
    path: "./rule_provider/rule_portgames.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_portgames.yaml
    interval: 86400
  rule_videoconferences:
    type: http
    behavior: classical
    path: "./rule_provider/rule_videoconferences.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_videoconferences.yaml
    interval: 86400
  rule_indo:
    type: http
    behavior: classical
    path: "./rule_provider/rule_Indo.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_Indo.yaml
    interval: 86400
  rule_sosmed:
    type: http
    behavior: classical
    path: "./rule_provider/rule_sosmed.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_sosmed.yaml
    interval: 86400
  rule_streaming:
    type: http
    behavior: classical
    path: "./rule_provider/rule_streaming.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_streaming.yaml
    interval: 86400
  rule_gaming:
    type: http
    behavior: classical
    path: "./rule_provider/rule_gaming.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_gaming.yaml
    interval: 86400
  rule_discord:
    type: http
    behavior: domain
    url: https://rules.kr328.app/discord.yaml
    path: "./rule_provider/rule_discord.yaml"
    interval: 86400
  Basic-ADS:
    type: http
    behavior: domain
    path: "./rule_provider/basicads.yaml"
    url: 'https://raw.githubusercontent.com/malikshi/open_clash/main/rule_provider/rule_basicads.yaml'
    interval: 86300
  Personal-ADS:
    type: http
    behavior: classical
    path: "./rule_provider/personalads.yaml"
    url: 'https://raw.githubusercontent.com/malikshi/open_clash/main/rule_provider/rule_personalads.yaml'
    interval: 86300
  ADS:
    type: http
    behavior: classical
    path: "./rule_provider/ADS.yaml"
    url: 'https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt'
    interval: 86300
  rule_reject:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt
    path: "./rule_provider/rule_reject.yaml"
    interval: 86400
  rule_porn:
    type: http
    behavior: domain
    url: https://rules.kr328.app/category-porn.yaml
    path: "./rule_provider/rule_porn.yaml"
    interval: 86400
  rule_nsfw:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_nsfw.yaml
    path: "./rule_provider/rule_nsfw.yaml"
    interval: 86400
  rule_telegramcidr:
    type: http
    behavior: ipcidr
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt
    path: "./rule_provider/rule_telegramcidr.yaml"
    interval: 86400
  rule_telegram:
    type: http
    behavior: domain
    url: https://rules.kr328.app/telegram.yaml
    path: "./rule_provider/rule_telegram.yaml"
    interval: 86400
  rule_disneyplus:
    type: http
    behavior: domain
    url: https://rules.kr328.app/disney.yaml
    path: "./rule_provider/rule_disneyplus.yaml"
    interval: 86400
  rule_games:
    type: http
    behavior: domain
    url: https://rules.kr328.app/category-games.yaml
    path: "./rule_provider/rule_games.yaml"
    interval: 86400
  rule_hbo:
    type: http
    behavior: domain
    url: https://rules.kr328.app/hbo.yaml
    path: "./rule_provider/rule_hbo.yaml"
    interval: 86400
  rule_iqiyi:
    type: http
    behavior: domain
    url: https://rules.kr328.app/iqiyi.yaml
    path: "./rule_provider/rule_iqiyi.yaml"
    interval: 86400
  rule_line:
    type: http
    behavior: domain
    url: https://rules.kr328.app/line.yaml
    path: "./rule_provider/rule_line.yaml"
    interval: 86400
  rule_metaverse:
    type: http
    behavior: domain
    url: https://rules.kr328.app/facebook.yaml
    path: "./rule_provider/rule_metaverse.yaml"
    interval: 86400
  rule_netflix:
    type: http
    behavior: domain
    url: https://rules.kr328.app/netflix.yaml
    path: "./rule_provider/rule_netflix.yaml"
    interval: 86400
  rule_primevideo:
    type: http
    behavior: domain
    url: https://rules.kr328.app/primevideo.yaml
    path: "./rule_provider/rule_primevideo.yaml"
    interval: 86400
  rule_playstore:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_playstore.yaml
    path: "./rule_provider/rule_playstore.yaml"
    interval: 86400
  rule_tiktok:
    type: http
    behavior: domain
    url: https://rules.kr328.app/tiktok.yaml
    path: "./rule_provider/rule_tiktok.yaml"
    interval: 86400
  rule_twitch:
    type: http
    behavior: domain
    url: https://rules.kr328.app/twitch.yaml
    path: "./rule_provider/rule_twitch.yaml"
    interval: 86400
  rule_twitter:
    type: http
    behavior: domain
    url: https://rules.kr328.app/twitter.yaml
    path: "./rule_provider/rule_twitter.yaml"
    interval: 86400
  rule_youtube:
    type: http
    behavior: domain
    url: https://rules.kr328.app/youtube.yaml
    path: "./rule_provider/rule_Youtube.yaml"
    interval: 86400

rules:
- RULE-SET,rule_reject,ads
- RULE-SET,rule_porn,ads
- RULE-SET,rule_nsfw,ads
- RULE-SET,rule_streaming,SG
- RULE-SET,rule_disneyplus,ID
- RULE-SET,rule_hbo,SG
- RULE-SET,rule_iqiyi,SG
- RULE-SET,rule_netflix,ID
- RULE-SET,rule_primevideo,SG
- RULE-SET,rule_twitch,SG
- RULE-SET,rule_youtube,SG
- RULE-SET,rule_sosmed,ID
- RULE-SET,rule_line,ID
- RULE-SET,rule_metaverse,ID
- RULE-SET,rule_tiktok,ID
- RULE-SET,rule_twitter,ID
- RULE-SET,rule_telegram,ID
- RULE-SET,rule_telegramcidr,ID
- RULE-SET,rule_indo,ID
- RULE-SET,rule_videoconferences,SG
- RULE-SET,rule_playstore,CLASH
- RULE-SET,rule_gaming,DIRECT
- RULE-SET,rule_discord,DIRECT
- RULE-SET,rule_games,DIRECT
- RULE-SET,rule_portgames,DIRECT
- RULE-SET,Basic-ADS,ADS,no-resolve
- RULE-SET,Personal-ADS,ADS,no-resolve
- RULE-SET,ADS,ADS,no-resolve
- GEOSITE,category-ads-all,ADS
#- DST-PORT,21-23/53/123/143/194/443/465/587/853/993/995/998/2052/2053/2082/2083/2086/2095/2096/5222/5228/5229/5230/8080/8443/8880/8888-8889,DIRECT,udp
- MATCH,CLASH