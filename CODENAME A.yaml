mode: rule
allow-lan: true
unified-delay: true
bind-address: '*'
log-level: silent
ipv6: false
geodata-mode: true
external-controller: 0.0.0.0:9090
external-ui: dashboard/dist
tcp-concurrent: false
interface-name: ""
enable-process: false
geodata-loader: memconservative
secret: ""
profile:
  store-selected: true
  store-fake-ip: true
geox-url: {mmdb: "https://cdn.jsdelivr.net/gh/Dreamacro/maxmind-geoip@release/Country.mmdb", geoip: "https://github.com/v2fly/geoip/raw/release/geoip-only-cn-private.dat", geosite: "https://github.com/taamarin/GeoSite.dat/raw/release/dlc.dat"}
dns:
  enable: true
  device: Meta
  ipv6: false
  default-nameserver:
    - 1.1.1.1
    - 1.1.1.1
  listen: 0.0.0.0:1053
  use-hosts: true
  enhanced-mode: fake-ip
  fake-ip-filter: ['networktest.twilio.com', '+.twilio.com']
  nameserver:
    - https://149.112.112.112/dns-query
    - quic://dns.adguard.com
    - tls://dns.adguard.com
  proxy-server-nameserver:
    - 104.18.38.174
  fallback:
    - 1.1.1.1
    - 1.1.1.1
  fallback-filter:
    geoip: false
    geoip-code: ID
    geosite: []
    domain:
      - '+.google.com'
    ipcidr: []
auto-redir:
  enable: false
  auto-route: false
tun:
  enable: false
  stack: system
  dns-hijack:
    - any:53
  auto-route: true
  auto-detect-interface: true
sniffer:
  enable: false
  sniffing:
    - tls
    - http
  force-domain:
    - '+'
  skip-domain:
    - '+.google.com'
  port-whitelist:
    - 443
    - 80
iptables: {enable: false, inbound-interface: "", bypass: []}
hosts:
  '+.clash.meta': 127.0.0.1
  'cacerts.digicert.com': 141.193.213.20
tproxy-port: 9898
proxy-groups:
- name: ❄CLASH❄
  type: select
  proxies:
  - ❄INDONESIA❄
  - ❄SINGAPURA❄
  - ❄BEST-PING❄ 
  - ❄LOAD-BALANCE❄
  - ❄ADS❄
  
- name: ❄INDONESIA❄
  type: url-test
  url: http://hi.bonds.id/ping
  interval: 300
  tolerance: 100
  use:
  - ID

- name: ❄SINGAPURA❄
  type: url-test
  url: http://hi.bonds.id/ping
  interval: 300
  tolerance: 100
  use:
  - SG
  
- name: ❄BEST-PING❄ 
  type: url-test
  url: http://hi.bonds.id/ping
  interval: 300
  tolerance: 80
  proxies:
  - ❄INDONESIA❄
  - ❄SINGAPURA❄
  
- name: ❄LOAD-BALANCE❄ 
  type: load-balance
  url: http://hi.bonds.id/ping
  interval: 300
  strategy: consistent-hashing
  disable-udp: false
  proxies:
  - ❄INDONESIA❄
  - ❄SINGAPURA❄

- name: ❄ADS❄
  type: select
  proxies:
  - REJECT
  - DIRECT
      
proxy-providers:
  ID:
    type: http
    behavior: classical
    path: ./AKUNID.yaml
    url: https://raw.githubusercontent.com/NICE28004/akun_clash04/main/AKUNID.yaml
    interval: 3500
    health-check:
      enable: true
      interval: 300
      lazy: true
      url: 'http://www.gstatic.com/generate_204'
      
  SG:
    type: http
    behavior: classical
    path: ./AKUNSG.yaml
    url: https://raw.githubusercontent.com/NICE28004/akun_clash04/main/AKUNSG.yaml
    interval: 3600
    health-check:
      enable: true
      interval: 300
      lazy: true
      url: 'http://www.gstatic.com/generate_204'
      
rule-providers: 
  rule_portgames:
    type: http
    behavior: classical
    path: "./rule_provider/rule_portgames.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_portgames.yaml
    interval: 86400
  rule_videoconferences:
    type: http
    behavior: classical
    path: "./rule_provider/rule_videoconferences.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_videoconferences.yaml
    interval: 86400
  rule_indo:
    type: http
    behavior: classical
    path: "./rule_provider/rule_Indo.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_Indo.yaml
    interval: 86400
  rule_sosmed:
    type: http
    behavior: classical
    path: "./rule_provider/rule_sosmed.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_sosmed.yaml
    interval: 86400
  rule_streaming:
    type: http
    behavior: classical
    path: "./rule_provider/rule_streaming.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_streaming.yaml
    interval: 86400
  rule_gaming:
    type: http
    behavior: classical
    path: "./rule_provider/rule_gaming.yaml"
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_gaming.yaml
    interval: 86400
  Basic-ADS:
    type: http
    behavior: domain
    path: "./rule_provider/basicads.yaml"
    url: 'https://raw.githubusercontent.com/malikshi/open_clash/main/rule_provider/rule_basicads.yaml'
    interval: 86300
  Personal-ADS:
    type: http
    behavior: classical
    path: "./rule_provider/personalads.yaml"
    url: 'https://raw.githubusercontent.com/malikshi/open_clash/main/rule_provider/rule_personalads.yaml'
    interval: 86300
  rule_reject:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt
    path: "./rule_provider/rule_reject.yaml"
    interval: 86400
  rule_porn:
    type: http
    behavior: domain
    url: https://rules.kr328.app/category-porn.yaml
    path: "./rule_provider/rule_porn.yaml"
    interval: 86400
  rule_nsfw:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/malikshi/open_clash@main/rule_provider/rule_nsfw.yaml
    path: "./rule_provider/rule_nsfw.yaml"
    interval: 86400
  rule_telegramcidr:
    type: http
    behavior: ipcidr
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt
    path: "./rule_provider/rule_telegramcidr.yaml"
    interval: 86400
  rule_telegram:
    type: http
    behavior: domain
    url: https://rules.kr328.app/telegram.yaml
    path: "./rule_provider/rule_telegram.yaml"
    interval: 86400
  rule_disneyplus:
    type: http
    behavior: domain
    url: https://rules.kr328.app/disney.yaml
    path: "./rule_provider/rule_disneyplus.yaml"
    interval: 86400
  rule_games:
    type: http
    behavior: domain
    url: https://rules.kr328.app/category-games.yaml
    path: "./rule_provider/rule_games.yaml"
    interval: 86400
  rule_youtube:
    type: http
    behavior: domain
    url: https://rules.kr328.app/youtube.yaml
    path: "./rule_provider/rule_Youtube.yaml"
    interval: 86400

rules:
- RULE-SET,rule_reject,❄ADS❄
- RULE-SET,rule_porn,❄ADS❄
- RULE-SET,rule_nsfw,❄ADS❄
- RULE-SET,rule_streaming,❄SINGAPURA❄
- RULE-SET,rule_disneyplus,❄INDONESIA❄
- RULE-SET,rule_youtube,❄SINGAPURA❄
- RULE-SET,rule_sosmed,❄INDONESIA❄
- RULE-SET,rule_telegram,❄INDONESIA❄
- RULE-SET,rule_telegramcidr,❄INDONESIA❄
- RULE-SET,rule_indo,❄INDONESIA❄
- RULE-SET,rule_videoconferences,❄SINGAPURA❄
- RULE-SET,rule_gaming,DIRECT
- RULE-SET,rule_games,DIRECT
- RULE-SET,rule_portgames,DIRECT
- RULE-SET,Basic-ADS,❄ADS❄,no-resolve
- RULE-SET,Personal-ADS,❄ADS❄,no-resolve
- GEOSITE,category-ads-all,❄ADS❄
- IP-CIDR,127.0.0.1/32,REJECT,no-resolve
- IP-CIDR6,::1/128,REJECT,no-resolve
#- DST-PORT,21-23/53/123/143/194/443/465/587/853/993/995/998/2052/2053/2082/2083/2086/2095/2096/5222/5228/5229/5230/8080/8443/8880/8888-8889,DIRECT,udp
- MATCH,❄CLASH❄
